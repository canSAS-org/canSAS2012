

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Implementation(s) of the canSAS2012 data format &mdash; Documentation of the canSAS2012 standard data format</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Documentation of the canSAS2012 standard data format" href="index.html" />
    <link rel="up" title="Contents" href="contents.html" />
    <link rel="next" title="Text: XML" href="xml.html" />
    <link rel="prev" title="SASdata: Adding Additional Data" href="sasdata.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="xml.html" title="Text: XML"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sasdata.html" title="SASdata: Adding Additional Data"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">canSAS2012</a> &raquo;</li>
          <li><a href="contents.html" accesskey="U">Contents</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cswikilogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Implementation(s) of the canSAS2012 data format</a><ul>
<li><a class="reference internal" href="#algorithm-for-software-to-read-data-files-written-with-this-structure">Algorithm for Software to Read Data files Written with this Structure</a></li>
<li><a class="reference internal" href="#algorithm-to-identify-values-given-a-set-of-indices-on-the-i-data">Algorithm to Identify <span class="math">\(Q\)</span> values given a set of indices on the <tt class="docutils literal"><span class="pre">I</span></tt> data</a><ul>
<li><a class="reference internal" href="#simple-time-series-example">simple time-series example</a></li>
<li><a class="reference internal" href="#id1">simple time-series example</a></li>
<li><a class="reference internal" href="#another-example">another example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sasdata.html"
                        title="previous chapter">SASdata: Adding Additional Data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="xml.html"
                        title="next chapter">Text: XML</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/implementation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="implementation-s-of-the-cansas2012-data-format">
<span id="implementation"></span><span id="index-0"></span><h1>Implementation(s) of the canSAS2012 data format<a class="headerlink" href="#implementation-s-of-the-cansas2012-data-format" title="Permalink to this headline">¶</a></h1>
<p>Describe why we have multiple implementations (small data community demands simple,
readable text while large data community demands efficient binary storage).
Describe that canSAS must let the community decide.  (Largely based on the
decisions of data suppliers and analysis software creators.)
Describe here some general information about the implementation(s).
Describe what is common amongst the implementations and what is not.</p>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="xml.html">Text: XML</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hdf5.html">Binary: HDF5</a><ul class="simple">
</ul>
</li>
</ul>
</div>
<div class="section" id="algorithm-for-software-to-read-data-files-written-with-this-structure">
<h2>Algorithm for Software to Read Data files Written with this Structure<a class="headerlink" href="#algorithm-for-software-to-read-data-files-written-with-this-structure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">open the file and read the <em>SASroot</em> (or root-level) group.</p>
</li>
<li><dl class="first docutils">
<dt>open each <em>SASentry</em> group:</dt>
<dd><ol class="first last arabic">
<li><p class="first">verify the version attribute: must be &#8220;1.0&#8221; (a string)</p>
</li>
<li><p class="first">note the <em>name</em> attribute, if present</p>
</li>
<li><p class="first">note the title, if present</p>
</li>
<li><p class="first">note the <em>SASsample</em> group contents, if present</p>
</li>
<li><dl class="first docutils">
<dt>open each <em>SASdata</em> group</dt>
<dd><ol class="first last arabic simple">
<li>note the <em>name</em> attribute, if present</li>
<li>read the <em>I_axes</em> attribute, it tells the names (in storage order) of the other data objects on which <em>I</em> depends.</li>
<li>read the <em>Q_indices</em> attribute, it tells which of the <em>I_axes</em> (zero-based numbering) have <em>Q</em> dependence</li>
<li>if present, read the <em>Mask_indices</em> attribute (similar to the <tt class="docutils literal"><span class="pre">Q_indices</span></tt>), to get the dependencies of the <tt class="docutils literal"><span class="pre">Mask</span></tt>.</li>
<li>read <tt class="docutils literal"><span class="pre">I</span></tt> data object as described below (see <a class="reference internal" href="#read-a-data-object">Read a data object</a>)</li>
<li>same for <tt class="docutils literal"><span class="pre">Q</span></tt>, <tt class="docutils literal"><span class="pre">Qx</span></tt>,  <tt class="docutils literal"><span class="pre">Qy</span></tt>,  <tt class="docutils literal"><span class="pre">Qz</span></tt> data objects (if present)</li>
<li>same for the names in the <em>I_axes</em> attribute (except for <em>Q</em> since it was already handled)</li>
</ol>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</li>
</ol>
<p class="rubric" id="read-a-data-object">Read a data object</p>
<ol class="arabic simple">
<li>read the <em>size</em> attribute, if present</li>
<li>allocate memory for the object</li>
<li>read the data object and its units</li>
<li>if present, read the <em>uncertainty</em> attribute and read the named data object it describes</li>
</ol>
</div>
<div class="section" id="algorithm-to-identify-values-given-a-set-of-indices-on-the-i-data">
<h2>Algorithm to Identify <span class="math">\(Q\)</span> values given a set of indices on the <tt class="docutils literal"><span class="pre">I</span></tt> data<a class="headerlink" href="#algorithm-to-identify-values-given-a-set-of-indices-on-the-i-data" title="Permalink to this headline">¶</a></h2>
<p>Given an intensity data object (called <tt class="docutils literal"><span class="pre">I</span></tt>), the algorithm to identify the associated
<tt class="docutils literal"><span class="pre">Q</span></tt> values with any given intensity datum is described here:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Identify the given set of indices with the names of data objects</dt>
<dd><ol class="first last arabic simple">
<li>note the set of indices for the intensity datum</li>
<li>note the names of the various intensity axes from the <tt class="docutils literal"><span class="pre">I_axes</span></tt> attribute</li>
</ol>
</dd>
</dl>
</li>
<li><p class="first">note the list of indices for <em>Q</em> as given by the <tt class="docutils literal"><span class="pre">Q_indices</span></tt> attribute</p>
</li>
<li><p class="first">... this gets tedious without a couple examples...</p>
</li>
<li><p class="first">analyze how we do it below and finish writing this part</p>
</li>
</ol>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">This write-up is unfinished at this point.  Follow below for a few examples.</p>
</div>
<div class="section" id="simple-time-series-example">
<h3>simple time-series example<a class="headerlink" href="#simple-time-series-example" title="Permalink to this headline">¶</a></h3>
<div class="sidebar">
<p class="first sidebar-title">Simplified example</p>
<p class="last">To simplify our example, only the relevant metadata has
been left in this example.</p>
</div>
<p>Consider the SAS data example including a time-series (same model as <a class="reference internal" href="examples.html#d-i-t-q-t"><em>2-D </em></a>):</p>
<blockquote>
<div><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre>SASroot
  SASentry
    SASdata
      @name=&quot;sasdata01&quot;
      @I_axes=&quot;Time,Q&quot;
      @Q_indices=0,1
      Qx : float[4,35]
      Qy : float[4,35]
      Qz : float[4,35]
      I : float[4,35]
      Time : float[4]
</pre></div>
</td></tr></table></div>
<ol class="arabic simple">
<li>The <em>I_axes</em> attribute describes a <em>Time</em> data object, in addition to some <em>Q</em> data.  The <em>Time</em> index is in the first position.</li>
<li>It also says that there is only one index to use (the second index on intensity) when looking up a <span class="math">\(Q\)</span> value.</li>
<li>Since there is no <em>Q</em> data object, there must be three data objects <em>Qx</em>, <em>Qy</em>, <em>Qz</em> that provide the scattering vector.</li>
<li>The <em>Q_indices</em> attribute indicates that the lookup of <em>Q</em> depends on both the <em>Time</em> (0) and <em>Q</em> (1) indices and that <em>Q</em> is time-dependent.</li>
<li>One index (position 0) is used to lookup the <em>Time</em> value.</li>
<li>index <em>i</em> is for <em>Time</em> and index <em>j</em> is for <em>Q</em>.</li>
</ol>
<p>Given the indices <tt class="docutils literal"><span class="pre">i,j</span></tt>, return all the data for this datum:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Qx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">],</span> <span class="n">Qy</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">],</span> <span class="n">Qz</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">],</span> <span class="n">Time</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id1">
<h3>simple time-series example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Consider the example of the 2-D time-dependent masked <a class="reference internal" href="examples.html#d-time-dependent-masked-image"><em>image</em></a>.</p>
<blockquote>
<div><p>Given the indices <tt class="docutils literal"><span class="pre">i,j,k</span></tt>, return all values for this datum:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Qx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">],</span> <span class="n">Qy</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">],</span> <span class="n">Qz</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">],</span> <span class="n">Time</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Mask</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">],</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="another-example">
<h3>another example<a class="headerlink" href="#another-example" title="Permalink to this headline">¶</a></h3>
<p>See the model for 2-D  <span class="math">\(I(T,t,P,Q(t))\)</span> <a class="reference internal" href="examples.html#example-2-d-images-with-varied-t-t-p"><em>images</em></a>.</p>
<blockquote>
<div><p>Given the indices <tt class="docutils literal"><span class="pre">i,j,k,l,m</span></tt>, return all values for this datum:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Qx</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">m</span><span class="p">],</span> <span class="n">Qy</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">m</span><span class="p">],</span> <span class="n">Qz</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">m</span><span class="p">],</span> <span class="n">Temperature</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Time</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">Pressure</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">I</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">m</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="xml.html" title="Text: XML"
             >next</a> |</li>
        <li class="right" >
          <a href="sasdata.html" title="SASdata: Adding Additional Data"
             >previous</a> |</li>
        <li><a href="index.html">canSAS2012</a> &raquo;</li>
          <li><a href="contents.html" >Contents</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012-2015, canSAS.
      Last updated on Jun 04, 2017.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>